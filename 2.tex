\chapter[Теоретические основы построения многоагентных\\систем]
        {Теоретические основы построения многоагентных систем}
\label{chap:mas-theory}

Разработку многоагентной системы, способной преодолеть основные проблемы интеграции
в рамках единой информационной среды автоматизированной технологической подготовки приборостроительного
производства целесообразно начать с~определения ряда фундаментальных положений. Данный
этап обусловлен тем, что многоагентные системы не являются программным
обеспечение в классическом понимании этого слова. Многоагентная система, в первую
очередь, есть метамодель, описывающая основные прикладные задачи, которые будет
решать проектируемая система, базовые элементы которой будут описаны в данной главе.

\section{Архитектура агентов}

\subsection{Основные определения} % Из Городецкого
\label{sec:agent-defs}

\emph{Агент (интеллектуальный агент, ИА)}~--- это независимая компьютерная система,
находящаяся в некоторой среде (\autoref{fig:agent-env}), способная
автономно действовать в ней для достижения своих целей.
\nomenclature{ИА}{Интеллектуальный агент}
С одной стороны, среда является объектом наблюдения для агента, среда поставляет агенту данные,
которые он может интерпретировать в зависимости от модели своего поведения.
С~другой стороны, среда является субъектом, на который агент может воздействовать
для достижения своих целей. %TODO: ЗДЕСЬ НАДО НАПИСАТЬ ЧТО-ТО ОБ ИЕРАРХИИ АГЕНТОВ, ОБЪЕКТОВ, ПРОЦЕДУР И Т.Д., ЭТО ЕСТЬ У ВУЛРИЖДА ВРОДЕ
Термин агент впервые был использован Джоном Маккарти (John McCarthy) и
Оливером Селфриджом (Oliver~G. Selfridge) в пятидесятых годах двадцатого века~\cite{Anumba-2005, Rassel-2006}.

\begin{figure}[h!]
    \centering
    \includegraphics[width=.7\textwidth]{agent-env.eps}
    \caption[Агент и его среда]
            {Агент и его среда}
    \label{fig:agent-env}
\end{figure}
%
Интеллектуальный агент, являясь гибкой программно или аппаратно
реали\-зованной системой, должен обладать следующими свойствами~\cite{Wooldridge-1994}:
{\parfillskip=0pt

}

\begin{itemize}
\item \emph{социальное поведение} (social ability)~--- способность
    функционировать в~сообществе с другими агентами (программными или нет), обмениваясь с ними
    сообщениями с помощью некоторого общепонятного языка коммуникаций;
\item \emph{реактивность} (reactivity)~--- способность реагировать на изменение
    среды, а также воздействовать на неё;
\item \emph{инициативность} (pro-activity)~--- способность ИА проявлять инициативу
    для достижения своих целей, тем самым демонстрируя своё
    целенаправленное поведение.
\end{itemize}

Помимо базовых свойств агент может обладать и рядом дополнительных свойств,
необходимых ему для решения конкретных проблем~\cite{Gorodetskii-1998}:

\begin{itemize}
\item \emph{автономность}~--- способность ИА действовать, принимать решения
    и~контролировать своё поведение самостоятельно, без участия человека,
    что крайне важно при автоматизации операций, происходящих
    по~расписанию, например, актуализация и~синхронизации данных между подсистемами АСТПП.
\item \emph{рациональность} (rationality)~--- способность оценивать результаты
    своих действий с целью нахождения оптимального решения.
\item \emph{адаптивность} (adaptability)~--- способность к обучению, результатом
    которого должно стать изменение внутреннего поведения ИА.
\item \emph{мобильность} (mobility)~--- способность агента к перемещению по сети.
{\parfillskip=0pt

}
\item \emph{правдивость} (veracity)~--- агент не способен сознательно предоставлять
    ложную информацию.
\item \emph{благожелательность} (benevolence)~--- агент готов помогать другим
    агентам, до тех пор пока это не противоречит его собственным целям, что
    подразумевает отсутствие у агента конфликтующих целей.
% \item \emph{знания} (knowledge)~--- это постоянная часть знаний агента о себе,
%     среде и других агентах, т.\,е. та часть, которая не изменяется в процессе его
%     функционирования;
% \item \emph{убеждения} (beliefs)~--- знания агента о среде, в частности, о других
%     агентах. Это те знания, которые могут изменяться во времени и становиться
%     неверными, однако агент может не иметь об этом информации и продолжать
%     основываться убеждении, что на их основе можно делать свои выводы;
% \item \emph{желания} (desires)~--- это состояния, ситуации, достижение которых
%     по разным причинам является для агента желательным, однако они могут быть
%     противоречивыми и потому агент не ожидает, что все они будут достигнуты;
% \item \emph{намерения} (intentions)~--- это то, что агент или обязан сделать в
%     силу своих обязательств по отношению к другим агентам (ему <<\emph{это}>>
%     поручено и он взял эту задачу на себя), или то, что вытекает из его желаний
%     (т.\,е. непротиворечивое подмножество желаний, выбранное по тем или иным
%     причинам, и которое совместимо с принятыми на себя обязательствами);
% \item \emph{цели} (goals)~--- конкретное множество конечных и промежуточных
%     состояний, достижение которые агент принял в качестве текущей стратегии
%     поведения;
% \item \emph{обязательства по отношению к другим агентам} (commitments)~--- задачи,
%     которые агент берёт на себя по просьбе (поручению) других агентов в рамках
%     достижения кооперативных целей или целей отдельных агентов в рамках
%     сотрудничества.
\end{itemize}

% Первые два из перечисленных понятий называют <<позицией агента>>, его <<точкой
% зрения>> (attitudes), остальные характеризуют в англоязычной литературе общим
% термином <<\emph{pro-attitude}>>, суть которого в том, что они <<направляют>> поведение
% агента таким образом, чтобы сделать отвечающие данному термину содержательные и
% формальные утверждения истинными.
%
% Некоторые авторы считают, что агент должен обладать также  рядом других свойств.
% К ним относятся~\cite{Wooldridge-1994}:
% %TODO: ЗДЕСЬ ССЫЛКА НА FIPA
% \begin{itemize}
% \item \emph{мобильность} (mobility)~--- способность агента мигрировать по сети в
%     поисках необходимой информации для решения своих задач, при кооперативном
%     решении задач совместно или с помощью других агентов~и~т.\,д.;
% \item \emph{благожелательность} (benevolence)~--- готовность агентов помочь друг
%     другу и готовность агента решать именно те задачи, которые ему поручает
%     пользователь, что предполагает отсутствие у агента конфликтующих целей;
% \item \emph{правдивость} (veracity)~--- свойство агента не манипулировать
%     информацией, про которую ему заведомо известно, что она ложна;
% \item \emph{рациональность} (rationality)~--- свойство агента действовать так,
%     чтобы достигнуть своих целей, а не избегать их достижения, по крайней мере,
%     в рамках своих знаний и убеждений.
% \end{itemize}

Реализация вышеуказанных свойств определяет один из видов агентной архитектуры:
\emph{реактивную} (основанную на реакции агентов на воздействие окружающей среды), либо \emph{делиберативную}
(основанную на целях агента).
{\parfillskip=0pt

}

\subsection{Реактивная архитектура}

Общая структура простого реактивного агента представлена на \autoref{fig:react-agents}.
Реактивные агенты не имеют единого символьного представления об окружающей среде.
Любые действия подобных агентов основываются на правилах вида <<условие--действие>>
(продукционная модель%
\footnote{%
Модель представления знаний, основанная на правилах вида <<Если (\emph{условие}),
то (\emph{действие})>>.
В~общем случае продукционная модель может быть задана следующим образом:
%
\begin{equation}
i=\langle S,L,A\rightarrow B,Q\rangle\text{, где}
\end{equation}
%
\begin{tabular}{p{2cm} p{10.5cm}}
$S$  & описание класса ситуаций,\\
$L$  & условие, при котором продукция активизируется,\\
$A\rightarrow B$ & ядро продукции,\\
$Q$  & постусловие продукционного правила.\\
\end{tabular}
\hspace{1cm}}).
%
\begin{figure}[h]
\begin{center}
\input{fig/react-agents.pgf}
\end{center}
\caption[Архитектура простого реактивного агента]
        {Архитектура простого реактивного агента}
\label{fig:react-agents}
\end{figure}
%
Базовая идея заключается в том, что интеллект агента является
результатом его взаимодействия со средой, в~которой он существует,
т.\,е. возникает как композиция простых поведенческих схем, структурированных
некоторым образом~\cite{Gorodetskii-1998}.

\textls[25]{Архитектура реактивного агента строится на базе множества
вариантов поведения (<<модулей поведения>>), решающих некоторое множество задач
без явного абстрактного логического вывода и символьного представления
знаний~\cite{Brooks-1991}.}

К основным недостаткам реактивной архитектуры можно отнести:
%
\begin{itemize}
\item Необходимость полного ситуационного определения всех возможных действий агентов.
\item Сложность создания обучающихся агентов.
\item Сложность в проектировании агентов с многочисленными вариантами поведения (динамическим взаимодействием).
\end{itemize}

По мнению автора, несмотря на простоту и вычислительную разрешимость, в чистом виде данная
архитектура не может быть использована при создании многоагентной системы технологического
назначения. Учитывая хорошую проработку экспертных модулей уже много лет
используемых для создания интеллектуальных АСТПП, отказ
от символьного представления знаний и логического вывода нежелателен,
а~отсутствие единой модели среды при проектировании интеграционного окружения просто
недопустимо.
{\parfillskip=0pt

}

\subsection{Архитектура, управляемая целями}

Архитектура, управляемая целями или архитектура \emph{Убеждение--Желание--Намерение}
(Belief--Desire--Intention~--- BDI) является наиболее перспективным видом
делиберативной\footnote{От английского \emph{deliberate}~--- тщательно продумывать.
Впервые термин был применён Майклом Генесеретом (Michael R. Genesereth) в работе~\cite{Genesereth-1987}.}
архитектуры построения МАС. Данная архитектура, в первую очередь обеспечивает агенту
механизм перераспределения времени между выбором плана действий и непосредственно
выполнением данных действий, при этом само планирование остаётся за рамками рассматриваемой
модели. Таким образом архитектура BDI должна моделировать <<\emph{практические
рассуждения}>> человека в тех
ситуациях, в которых решения приходится принимать ИА~\cite{Bratman-1987}. Следовательно, данная
архитектура во многом  строится по аналогии с процессами рассуждений и принятия
решений специалистом. Структура BDI-агента представлена на~\autoref{fig:aims-agents}.
%
\begin{figure}[h]
\begin{center}
\input{fig/aims-agents.pgf}
\end{center}
\caption[Архитектура агента, управляемого целями]
        {Архитектура агента, управляемого целями}
\label{fig:aims-agents}
\end{figure}

\textls[25]{Подобное интеллектуальное поведение требует, чтобы BDI-агент обладал необходимыми знаниями, информацией
о среде (убеждениями), а~также мощными механизмами рассуждений о различных
компонентах модели интеграционной технологической среды, которые позволят ему динамически формировать своё
поведение в соответствии с его базой знаний, намерениями и множеством целей.
Формальные модели знаний, убеждений, а также соответствующие механизмы рассуждений
строятся на основе логических языков~\cite{Rao-1995}.}

Агентные убеждения соответствуют информации агента о мире и могут
быть неполными и некорректными.
Цели (намерения) агентов обычно соответствуют задачам, назначенным
данным агентам в процессе проектирования. Агенты не могут достичь
всех своих целей, даже если они непротиворечивы, поэтому
должны зафиксировать некоторое множество реальных целей
и~передать ресурсы для их достижения.
% Эти выбранные цели являются
% намерениями, и агент будет стремиться достигнуть их до тех пор,
% пока его убеждения соответствуют цели, либо цель при данных
% убеждениях не является более достижимой.

События, воспринимаемые агентом, помещаются в очередь событий.
Внутренний интерпретатор агента непрерывно выполняет следующий цикл~\cite{Korepanov-2011}:
{\parfillskip=0pt

}

\begin{enumerate}
\item просматривает многоагентную среду и~своё внутреннее состояние,
на основании полученных данных изменяет очерёдность событий;
\item генерирует новые возможные желания (задачи), находя те планы, чьи
триггеры событий включены;
\item выбирает из этого множества планов один для
выполнения;
\item помещает желаемое значение в существующий или новый стек, в
соответствии с тем, имеется или нет подцель;
\item\textls[-25]{выбирает стек намерений, читает план, находящийся в вершине стека
и выполняет следующий шаг из этого плана; если шаг есть действие~---
выполняет его, если это подцель~--- посылает эту подцель в очередь событий;}
{\parfillskip=0pt

}
\item возвращается к шагу 1.
\end{enumerate}

% Шаг 5 этого цикла реализует способ выполнения плана, когда подцель
% помещается в очередь событий, что вызывает активизацию очередного
% плана~и~т.\,д.

Внутреннее поведение агентов, построенных в соответствии с данной архитектурой
практически полностью соответствует поведению специалистов в процессе
в процессе интеллектуального поиска при проектировании ТП в условиях автоматизации,
что несомненно позволяет использовать её при проектировании агентов
многоагентной технологической системы. Тем не менее, архитектура BDI имеет и ряд
недостатков:
\begin{enumerate}
    \item Сложность создания полной и точной модели окружающей среды
    (\mbox{может} быть уменьшена за счёт следованию принципу стандартизации
    при построении автоматизированных систем технологической подготовки
    производства~(\autoref{sec:astpp-prince})).
    \item Возможность зацикливания в процессе логического вывода.
    \item\textls[-60]{Отсутствие способности агентов к анализу собственных действий и~\mbox{самообучению}.}
\end{enumerate}


\subsection{Гибридная архитектура}
\label{sec:hybrid-arch}

\textls[-25]{На основании всего вышесказанного можно сделать вывод о том, что наиболее предпочтительной
агентной архитектурой при проектировании многоагентной системы технологического назначения
должна стать архитектура, объединяющая в \mbox{себе} достоинства
обоих подходов, т.\,е. \emph{гибридная архитектура}~(\autoref{fig:hybrid-arch}). При~проектировании
производственных и технологических многоагентных систем именно эта архитектура является
наиболее востребованной.}

\begin{figure}[t!]
    \centering
    \includegraphics[width=\textwidth]{hybrid-arch.eps}
    \caption{Агент с гибридной архитектурой}
    \label{fig:hybrid-arch}
\end{figure}

\textls[-40]{Гибридная архитектура позволяет строить агенты из двух модулей:}

\begin{itemize}
\item BDI-модуля, содержащего символьную модель мира для принятия глобальных решений.
\item\textls[-20]{Реактивного модуля для реагирования на происходящие в системе события.}
\end{itemize}

Полученная в результате архитектура~(\autoref{fig:hybrid-arch}) является многоуровневой, т.\,е. подсистема
контроля агента в ней состоит из двух уровней, при~этом каждый вышележащий уровень работает с
менее формализованной информацией.
{\looseness=-1

}

К сожалению, и у гибридной архитектуры есть один ключевой недостаток~--- сложность организации
взаимодействия между разными уровнями каждого агента. Следовательно, реализация
многоагентной системы из агентов с подобной архитектурой~--- достаточно нетривиальная
задача, требующая использования специализированных инструментальных средств разработки,
подробнее описанных в~\autoref{chap:soft-hard}.

\section{Описание математической модели функционирования многоагентных систем}
\label{sec:matmodel}

% В \autoref{sec:protoagents} было показано, что функциональности
% протоагентов явно недостаточно для создания полноценной многоагентной технологической системы.
% Понятие протоагента должно быть модифицировано, в первую очередь присвоением агенту
% некоторого количества поведенческих свойств. Также следует отказаться от единой
% логической машины вывода, передав её функции интеллектуальному модулю агента.
% Достигнутая таким образом децентрализация ведёт к необходимости более подробной
% проработке математической модели среды, в которой существую агенты. По мнению автора
% понятие \emph{многоагентной технологической среды} следует отделить от понятия
% \emph{многоагентной технологической системы}. Среда представляет собой абстрактную сущность,
% которая может воздействовать на находящихся в ней агентов (протоагентов), и в которую агенты
% попадают извне. В многоагентной среде агенты не взаимодействуют друг с другом.
% В свою очередь, многоагентная система является многоагентной средой с дополнительным
% механизмом межагентного взаимодействия, определённая в конкретной предметной области.
% Ниже все эти понятия будут раскрыты более подробно.
%


\subsection{Многоагентные среды}
\label{sec:mae}


\subsubsection{Общие положения}
\label{sec:formal-mae}

Автор считает, что следует различать понятия многоагентной
среды (в~рассматриваемой предметной области~--- интеграционной технологической
среды) и многоагентной системы, представляя первую в качестве некоторого абстрактного
фундамента второй.  
Многоагентная среда (МС) определяется унифицированной
\nomenclature{МС}{Многоагентная среда}
математической моделью, позволяющей в дальнейшем перейти к рассмотрению холонических
\mbox{структур (\autoref{sec:holon})}. Унификация достигается за счёт единообразности определений,
позволяющей на основе информации о состоянии агента делать выводы о состоянии
среды и \mbox{наоборот}.

Впервые подобная модель была описана в работе~\cite{Gerber-1999}.
В этом разделе автором будет показано, что любая среда, содержащая
множество агентов может быть изоморфно спроецирована на среду, в которой явно
представлен всего один агент, в то время, как остальные агенты находятся за её
пределами. Также будет показано как на основе заданной МС построить изоморфную
ей среду, где группа агентов будет объединена для создания единого \emph{холонического
агента} и как провести \emph{холоническую декомпозицию} (см. принцип декомпозиции,
\autoref{sec:astpp-prince}), т.\,е. разделить единого
агента на группу холонических агентов~\cite{Wooldridge-2002}.

Введём понятие многоагентная среда.
\emph{Многоагентная среда} есть кортеж $(\mathcal{A},\mathcal{E},\Pi,\Delta)$,
где $\mathcal{A}=\{\alpha_1,\ldots,\alpha_n\}$~--- \emph{множество всех агентов}. Каждый
агент $\alpha_i$ представляет собой кортеж $(S_i,P_i,A_i,\phi_i)$ множества
возможных состояний~$S_i$, множества объектов восприятия (перцепции) $P_i$,
множества действий $A_i$ и агентной функции $\phi_i\colon S_i\times P_i \rightarrow S_i\times A_i$.
$\mathcal{E}$~--- \emph{множество состояний среды}. $\Pi\colon\mathcal{E}\rightarrow (P_1\times\ldots\times P_n)$~---
\emph{функция восприятия}, $\Delta\colon\mathcal{E} \times (A_1\hm{\times}\ldots\times A_n)\rightarrow \mathcal{E}$~---
\emph{функция среды}.

Предполагается, что существует некоторая дискретная временная
шкала, где временной шаг задаётся переходом от одной точки шкалы к другой. Любой
агент $\alpha_i$ для
всех состояний среды $e\in \mathcal{E}$ и всех состояний агентов
$(s_1,\ldots,s_n)\in S_1\times\ldots\times S_n$ на каждом шаге вычисления через функцию восприятия получает
свой локальный объект восприятия $\Pi^i(e)$. Агент рассчитывает своё действие $a_i=\phi^2_i(s_i,\Pi^i(e))$
и своё новое состояние
$s'_i=\phi^1_i(s_i,\Pi^i(e))$ на основании текущего состояния $s_i$ и своего восприятия
этого состояния,\footnote{Верхний индекс обозначает проекционную функцию Клини,
например, $\Pi^i(e)$~--- это $P_i$ в области значений $(P_1,\ldots,P_n)$ функции
$\Pi$.} т.\,е.~состояние среды меняется под действием агентов.
%
\begin{equation}
e'=\Delta(e,a_1,\ldots,a_n)
\end{equation}
%
\noindent определяет преемственное состояние среды, а
%
\begin{equation}
s'_i=\phi_i^1(s_i,\Pi^i(e))
\end{equation}
%
\noindent задаёт преемственное состояние агентов для всех $i$. Переходная функция
состояния $\bar\Delta\colon\mathcal{E}\times S_1\times\ldots\times S_n\rightarrow \mathcal{E}\times S_1\times\ldots\times S_n$, определённая
 как $\bar\Delta(e,s_1,\ldots,s_n)=(e',s'_1,\ldots,s'_n)$, объединяет состояния
агентов и состояния среды. 
Следовательно, функция восприятия, агентная функция и функция среды являются
частями переходной функции $\bar\Delta$.

Две МС $(\mathcal{A},\mathcal{E},\Pi,\Delta)$ и
$(\mathcal{A}',\mathcal{E}',\Pi',\Delta')$ \emph{изоморфны}, если существует
биективная функция $\Psi\colon\mathcal{E}\times S_1\times\ldots\times S_n\rightarrow \mathcal{E}'\times S'_1\times\ldots\times S'_n$
такая, что для всех $(e,s_1,\ldots,s_n)\in\mathcal{E}\times S_1\times\ldots\times S_n$
%
\begin{equation}
\bar\Delta'(\Psi(e,s_1,\ldots,s_n))=\Psi(\bar\Delta(e,s_1,\ldots,s_n))
\end{equation} 

Следует обратить внимание на то, что у любой МС есть две специальные конфигурации: первая~---
среда без агентов, в которой все изменения состояния кодируются функцией среды $\Delta$;
вторая~--- МС с единственным неизменным состоянием и одним агентом, все
изменения состояния которого кодируются агентной функцией $\phi$. Подобная 
формализация позволяет редуцировать МС, содержащую несколько агентов до
одноагентного случая, представляя всех агентов, кроме одного, в качестве субъектов
среды.

На \autoref{fig:env-merge} представлено интуитивное представление подобной конструкции, которое будет 
явно декларировано ниже.
%
\begin{figure}[h!]
    \centering
    \includegraphics[width=.8\textwidth]{env-merge.eps}
    \caption[Преобразование многоагентной среды в одноагентную]
            {Преобразование многоагентной среды в одноагентную}
    \label{fig:env-merge}
\end{figure} %

Если $E=(\{\alpha_1,\ldots,\alpha_n\},\mathcal{E},\Pi,\Delta)$~--- многоагентная
среда, то для каждого $i\leq n$ существует изоморфная многоагентная среда
$(\{\alpha_i \},\mathcal{E}',\Pi',\Delta')$. 
Не~нарушая общности рассуждения, возьмём $i=1$. Создадим среду $E'\hm{=}(\{\alpha_i \},\mathcal{E}',\Pi',\Delta')$
такую, что $\mathcal{E}'=\mathcal{E}\times S_2\times\ldots\times S_n$, $\Pi'=\Pi^1$,
для всех $(e,s_2,\ldots,s_n)\in\mathcal{E}'$ и $a_1\in A_1$ функция среды
$\Delta'\colon\mathcal{E}'\times A_1\rightarrow\mathcal{E}'$ задаётся как:
%
\begin{equation}
\Delta'((e.s_2,\ldots,s_n),a_1)=(e',s'_2,\ldots,s'_n),
\end{equation}
где $e'=\Delta(e,a_1,\phi_2^2(s_2,\Pi^2(e)),\ldots,\phi_n^2(s_n,\Pi^n(e)))$~---
преемственное состояние $e$ в $E$ для $a_1$ и остальных действий агентов $\phi_i^2(s_i,\Pi^i(e))$.
$s'_i=\phi_i^1(s_i,\Pi^i(e))$~--- преемственное состояние $s_i$ в $E$ для $2\leq i \leq n$.
Из чего непосредственно и~следует свойство изоморфизма.

Также необходимо ввести понятия холонического объединения и декомпозиции (подробнее о холоническом
подходе см.~\autoref{sec:hms}), а также показать, как объединить
множество агентов в холон (\autoref{fig:holo-merge}).
%
\begin{figure}[h!]
    \centering
    \includegraphics[width=.8\textwidth]{holo-merge.eps}
    \caption[Холоническое объединение]
            {Холоническое объединение}
    \label{fig:holo-merge}
\end{figure} 

Рассмотрим две изоморфные МС: $(\{\alpha_1,\ldots,\alpha_n\},\mathcal{E},\Pi,\Delta)$
и $(\{\alpha_1,\ldots,\alpha_{i-1},\allowbreak\alpha_{i,1},\ldots,\alpha_{i,m},\alpha_{i+1},\ldots,\alpha_n\},\mathcal{E},\Pi',\Delta')$, где $\alpha_i$ есть холоническое объединение $(\alpha_{i,1},\allowbreak\ldots,\alpha_{i,m})$.
Для любой МС $(\{\alpha_1,\ldots,\alpha_n\},\mathcal{E},\Pi,\Delta)$ и $k\leq n$
можно создать изоморфное многоагентную среду $(\{\alpha',\alpha_{k+1},\ldots,\alpha_n\},\mathcal{E},\Pi',\Delta')$,
где $\alpha'$ есть холоническое объединение агентов $\alpha_1,\ldots,\alpha_k$.

Создадим среду $(\{\alpha',\alpha_{k+1},\ldots,\alpha_n\},\mathcal{E},\Pi',\Delta')$
с агентом $\alpha'=(S',P',A',\phi')$, который эмулирует агентов $\alpha_1,\ldots,\alpha_k$ и
адаптируем функцию восприятия и~функцию среды следующим образом: $S'=(S_1\times\ldots\times S_k)$,
$P'=(P_1\times\ldots\times P_k)$, $A'=(A_1\times\ldots\times A_k)$, в то время как
для всех $s'=(s_1,\ldots,s_k)\in S'$ и $p'\hm{=}(p_1,\ldots,p_k)\in P'$ агентная
функция будет определяться как:
%
\begin{equation}
\phi'(s',p')=((\phi_1^1(s_1,p_1),\ldots,\phi_k^1(s_k,p_k)),(\phi_1^2(p_1,s_1),\ldots,\phi_k^2(p_k,s_k))),
\end{equation}
%
где первая (вторая) валентность $\phi'$ есть кортеж первых (вторых)
валентностей составных агентных функций. Кроме того, можно определить функцию восприятия
$\Pi'\colon \mathcal{E}\rightarrow (P',P_{k+1},\ldots,P_n)$ для всех $e\in \mathcal{E}$ следующим образом:
%
\begin{equation}
\Pi'(e)=((\Pi^1(e),\ldots,\Pi^k(e)),\Pi^{k+1}(e),\ldots,\Pi^n(e))
\end{equation}

В данном случае восприятие агента $\alpha'$
состоит из восприятия агентов $\alpha_1\ldots \alpha_k$. Наконец, функция 
окружения $\Delta'\colon\mathcal{E}\times A'\times A_{k+1}\times\ldots\times A_n$
определяется как:
%
\begin{equation}
\Delta'(e,a',a_{k+1},\ldots,a_n)=\Delta(e,a_1,\ldots,a_n)
\end{equation}
%
\noindent для всех $e\in \mathcal{E}$, $a'=(a_1,\ldots,a_k)\in A'$, $a_{k+1},\ldots,a_n\in A_n$.
Из чего непосредственно и следует возможность холонического объединения и
декомпозиции, что позволяет представлять множество агентов в
виде одного суперхолона и~редуцировать суперхолон до одноагентного состояния.

\subsubsection{Алгебраические свойства операции холонического объединения}
\label{sec:holomerge}

Основная идея холонического объединения заключается в возможности \emph{слияния}
нескольких субхолонов в один суперхолон, который можно представить с помощью
операции последовательного выполнения (композиции):
{\parfillskip=0pt}
%
\begin{equation}
(H_1 \otimes H_2),
\end{equation}

\noindent где каждый из холонов $H_1$ и $H_2$ связан с некоторой агентной функцией $\phi_i\colon S_i\times P_i\rightarrow S_i\times A_i$,
$i=1,2$.

Пусть $I$~--- единичный холон, дающий тождественное отображение,
т.\,е.:
\begin{equation}
\forall\:H\colon I\otimes H=H\otimes I=H
\end{equation}
Операция холонического объединения ассоциативна, т.\,е. $\forall\:H_1$, $H_2$, $H_3\colon$
\begin{equation}
(H_1\otimes H_2)\otimes H_3=H_1\otimes (H_2\otimes H_3)
\end{equation}

Данное утверждение следует непосредственно из определений состояния среды и того факта, что прямое
произведение, семантика которого используется, ассоциативно по определению.
Можно сделать вывод, что $(H_i,I,\otimes)$~--- моноид.
Также следует отметить, что операция холонического объединения коммутативна, т.\,е.:
\begin{equation}
H_1\otimes H_2=H_2\otimes H_1,
\end{equation}
но не обладает свойством идемпотентности, т.\,е.:
\begin{equation}
H\otimes H \neq H
\end{equation}

Последнее положение легко доказывается на основании представления состояния среды в
виде кортежа $(s,s)$, отличного от единичного состояния~$s$, иными словами, два
технологических объекта (в данном случае, холона технологических объектов),
будучи объединены в один, приобретают новые свойства. Из этого следует, что
используемая для определения многоагентной технологической среды алгебраическая
структура $(H_i,I,\otimes)$ есть моноид Абеля, неидемпотентная по определению.


\subsection{Многоагентные системы}
\label{sec:mas}
\subsubsection{Общие положения}

\emph{Многоагентная система} (МАС)~--- вычислительная система, в которой два или более
агента (холона)
взаимодействуют (сотрудничая, соперничая или комбинируя первое и второе), чтобы
достичь определённых индивидуальных или коллективных целей, находящихся за пределами
индивидуальных способностей и знаний каждого агента. 

Теория многоагентных систем занимается исследованием координации взаимодействия
группы автономных интеллектуальных агентов (существующей, либо вновь созданной).
Анализируется индивидуальное поведение каждого агента и его вклад в поведение
системы в целом. Основными направлениями исследований являются модели поведения агентов
внутри МАС, стратегии сотрудничества и кооперации, интеллектуальное посредничество,
задачи оптимизации производительности, самообучение, формирование коалиций и т.\,д.

Таким образом, МАС является программной технологией общего назначения, базирующейся
на фундаментальных исследованиях автономного поведения, интеллектуальной кооперации, теории
формирования групп и~др. Эта~технология находит самое широкое применение в~тех областях,
в~которых требуется взаимодействие некоторых сущностей в сложной гетерогенной среде,
следовательно может быть применена для совершенствования механизмов взаимодействия
программных средств в рамках комплексной автоматизации технологической подготовки
производства.

Существует несколько математических моделей, описывающих многоагентные системы.
Наиболее полная из них описана в работах Майкла Вулдриджа\footnote{
Очень интересная математическая модель многоагентных систем представлена в
работе~\cite{Singh-1994}, в~ней~МАС описывается с помощью теории формальных
языков и грамматик. В силу своей специфики данная работа рассматриваться не будет.}~\cite{Wooldridge-2002, Wooldridge-1994, Bussmann-2001a, Vieira-2007}.
В данной модели многоагентная среда никак не отделяется от многоагентной системы,
являясь её неотъемлемой частью. Автором же будет рассмотрена более простая модель,
впервые предложенная в работе~\cite{Fischer-2003}, и лучше вписывающаяся в предлагаемую
концепцию, где МС является абстрактным фундаментом, а МАС~--- коммуникационной
\mbox{надстройкой}.

\subsubsection{Фундаментальное определение многоагентных систем}
\label{sec:mas-found}

\textls[20]{Для любой программной системы принято отделять её статическое определение (технические требования) от
динамического экземпляра времени исполнения (runtime instance). В то время как
концепции и теории описания технических требований к программному обеспечению 
достаточно хорошо описаны и документированы, методы описания
и анализа динамического поведения программных систем вcё ещё плохо изучены.
Особенно остро эта проблема проявляется в отношении многоагентных систем, в которых
самоорганизация в~процессе исполнения является ключевым аспектом. Это~позволяет
выделить многоагентные системы в~отдельный класс, для которого неприменимы традиционные
парадигмы разработки программного обеспечения.}
\nomenclature{ПО}{Программное обеспечение}

Предположим, что есть некоторая сущность, позволяющая агентам самостоятельно 
изменять свою структуру (самоорганизовываться).
Например, общеизвестные стандарты FIPA
(\autoref{sec:FIPA-standards})
описывают именно такую агентную модель. В спецификациях FIPA определена \emph{Агентная служба каталога} (Agent Directory Service~--- ADS), позволяющая агентам
взаимодействовать друг с другом. Данная служба обязана предоставлять агентам как
минимум сервис <<\emph{белых страниц}>>, где агенты могут узнавать адреса других агентов.
Дополнительно у ADS есть сервис <<\emph{жёлтых страниц}>>, хранящий информацию о
всех службах, предоставляемых участниками многоагентной системы. В~проектируемой системе
службами (агентными сервисами) являются средства информационного
обеспечения АСТПП
(подробнее см.~\autoref{sec:abstract-resources}).
{\parfillskip=0pt

}

Для описания многоагентной системы в рассматриваемой предметной области
определяется множество агентов-прототипов,
созданных в соответствии с принципами организации многоагентных сред.
Следовательно, можно дать следующее статическое \mbox{определение многоагентной системы}:
% %
\begin{equation}\label{eq:mas-prot}
    \mathcal{MAS}_{prot}=(\mathcal{A}_{prot},ADS)\text{, где}
\end{equation}
%
\noindent
\begin{tabular}{p{2cm} p{14.5cm}}
$\mathcal{A}_{prot}$ &
множество агентов-прототипов $\{A^1,\ldots,A^n\},n\in\mathbb{N}$, экземпляры
которых могут быть динамически включены в систему.
\\
$ADS$ &
специализированный агент-прототип, реализующий агентную службу каталога.
\\
\end{tabular}

Объекты конечного множества~\eqref{eq:mas-prot} формируют МАС в определённой
предметной области. Процесс решения любой задачи в рамках МАС начинается с
инициализации одного из агентов системы:
%
\begin{gather}
\mathcal{MAS}_{init}=(\mathcal{A}_{init},ADS_{init})\text{, где}\notag\\
\mathcal{A}_{init}=\{A_1^1,\ldots, A_{k_1}^1,\ldots,A_1^n,\ldots, A_{k_n}^n\},k_1,\ldots,k_n\in\mathbb{N}\text{ и}\\
\forall A_j^i\in\mathcal{A}_{init}:A^i\vartriangleright A_j^i\wedge A^i\in\mathcal{A}_{prot}\cdot\notag
\end{gather}

Выражение $A^i\vartriangleright A_j^i$ (читается <<$A_j^i$~--- экземпляр $A^i$>>) показывает,
что $A_i^j$ является экземпляром агента-прототипа $A_i$. Агент $A_i^j$ наследует поведение
и~все изначальные знания агента-прототипа, а также может обладать некоторыми
дополнительными свойствами или знаниями (например, уникальным идентификатором,
позволяющим другим агентам многоагентной системы взаимодейст\-вовать с~ним).
{\looseness=-1

}
% Необходимо отметить, что из представленного определения $ADS_{init}$ вовсе не
% следует, что МАС контролирует работающего с ней системного инженера.
% МАС~--- открытая среда, можно предположить, что $ADS_{init}$ представляет некоторый
Окружение МАС открыто, поэтому можно предположить, что $ADS_{init}$ представляет некоторый
существующий каталог $ADS$, который находился в~состоянии $ADS_{init}$ в то
% время, когда был запущен первый управляемый системным инженером агент. Продолжая
время, когда был запущен первый агент. Продолжая
эту линию рассуждения, можно также предположить, что не все агенты из множества $A_{init}$
были разработаны программистами, некоторые из них уже существовали в обозначенной
выше открытом окружении. На следующем этапе рассматриваемая модель может быть
дополнена множеством подобных отрытых агентов $\mathcal{A}_{open}=\{A_1^1,\ldots, A_{k_1}^1,\ldots,A_1^m,\ldots, A_{k_n}^m\}, 1\leq m < n$.
Поэтому описанная спецификация
агентов-прототипов, вероятно, является неполной в том смысле, что программисту,
разрабатывающему $\mathcal{A}_{prot}$ будет нужна информация
только о $\{A^1,\ldots,A^m\}$, остальные же агенты множества $\mathcal{A}_{open}$
просто будут пользоваться сервисами этих агентов.

Из $\mathcal{MAS}_{init}$ можно вывести определение динамической среды $\mathcal{MAS}_t$:
%
\begin{gather}
\mathcal{MAS}_t=(\mathcal{A}_t,ADS_t)\text{, где}\notag\\
\mathcal{A}_t=\{A_1^{1,t},\ldots,A_{l_1}^{1,t},\ldots,A_1^{n,t},\ldots,A_{l_n}^{n,t}\},l_1,\ldots,l_n\in\mathbb{N}\text{ и}\\
\forall A_j^{i,t}\in\mathcal{A}_t : A^i\blacktriangleright A_j^{i,t}\wedge A^i\in{A}_{prot}\cdot\notag
\end{gather}
%
Операция $\blacktriangleright$ (читается <<\emph{преобразуется в}>>), являющаяся
сокращённой записью выражения $\langle\vartriangleright\rangle \circ \langle\rightsquigarrow^*\rangle$ и
означающая, что мы имеем $A^i\vartriangleright A_j^i$, где~$A_j^i\hm{\in}\mathcal{A}_{init}$ и
$A_j^i\rightsquigarrow^*A_j^{i,t}$, где $\rightsquigarrow^*$ обозначает, что
преобразование $A_j^i$ происходит за~один шаг вычисления.

Работа МАС базируется на взаимодействии агентов. В систему в любое время могут
быть введены новые агенты, а старые убраны из неё. Каждый агент имеет
уникальный адрес, который может быть зарегистрирован агентом ADS и стать
доступным для всех агентов МАС. Адрес агента ADS известен всем агентам изначально.

\subsection{Абстрактные ресурсы и их роль в МАС}
\label{sec:abstract-resources}
\subsubsection{Общие положения}

Концепция \emph{абстрактных ресурсов} является часто
используемым обобщением в теории информации, где под ресурсами обычно подразумеваются
процессорное время и объём используемой памяти. Для МАС термин абстрактный ресурс
используется для обозначения \emph{любых инструментов и~средств многоагентного
окружения, которые помогают агенту достичь наивысшей полезности}~\cite{Wooldridge-2002, Gerber-1999}. Ресурсы
(например, информация, восприятие, умение) могут усовершенствовать возможности
агента, а их отсутствие~--- существенно ограничить их. Это понятие включает в
себя не только такие <<классические>> ресурсы, как пространство и время, но и,
например, информацию, восприятие или другие средства и умения агента.
Управление ресурсами осуществляется с помощью традиционного механизма, именуемого \emph{семафором}.
Архитектура семафора предполагает, что только один агент может обладать ресурсом,
позволяющим ему действовать (участвовать в процессе вычисления).

Для суперхолона умения и возможности его субхолонов являются абстрактными ресурсами.
Отсюда следует, что в холоническом сообществе абстрактными ресурсами могут быть
также умения \emph{субагентов}, из которых состоит холон, \emph{количество агентов}
(т.\,е. субсубхолонов), выполняющих конкретные задачи, \emph{различные коммуникационные
протоколы} и~т.\,д.

Ресурсы, выделяемые суперхолону, могут быть реструктурированы (разделены на
небольшие части) и перераспределены между его субхолонами. Данное распределение
можно рассматривать как некоторую <<директиву>>, определяющую дальнейшее 
поведение субхолонов.

\subsubsection{Формальное определение ресурсов}

Каждому состоянию МАС необходимо присвоить фиксированные значения, определяющие, что
для агентов внутри МАС некоторые состояния более предпочтительны, чем другие.
От того, как будет рассчитано данное вспомогательное значение (именуемое \emph{функцией полезности}) для каждого конкретного
агента, зависят его локальные перспективы развития, а следовательно, это значение
субъективно и, возможно, даже ошибочно.

Как было показано выше, мы можем редуцировать
многоагентную среду до одноагентного состояния. Следовательно, для определения
функции \mbox{полезности} достаточно рассмотреть одноагентное окружение
$E\hm{=}(E_1,\ldots,E_n)$ с~агентом $\alpha=(S,P,A,\phi)$.

\emph{Функция полезности} есть отображение $u\colon E\times S\rightarrow\mathbb{R}$,
где $u(e)$ \mbox{выражает} значение полезности действия агента $\alpha$, находящегося в ситуации $e$. 
Ранее, в~разделе~\ref{sec:formal-mae}, состояние среды было задано в виде кортежа
независимых подсостояний. Представляя ресурсы как часть МАС, можно идентифицировать
определённые подмножества подсостояний как ресурсы.

Ресурсы, являющиеся частью МАС, позволяют агенту достичь состояния, когда его
полезность станет выше. В частности, нас интересует последовательность
действий способствующая достижению наивысшей полезности, и~мы ищем ресурсы,
которые необходимы для успешного выполнения этой последовательности (\autoref{fig:utility-func}).
Далее будет рассмотрен положительный случай (важные ресурсы
доступны); негативный случай (ресурсы не доступны) задан в скобках.

\begin{figure}[h!]
    \centering
    \includegraphics[width=\textwidth]{utility-func.png}
    \caption[Значение полезности для различных состояний среды]
            {Значение полезности для различных состояний среды}
    \label{fig:utility-func}
\end{figure}

Пусть $e=(e_1,\ldots,e_i,\ldots,e_n,s)\in E\times S$~--- состояние среды, а
$(u\colon E\hm{\times} S\rightarrow \mathbb{R})$~--- функция полезности. \emph{Ресурс}
$E_i$ является частью состояния среды $E_1\times\ldots\times E_n\times S$ по
отношению к $U$, если:
\begin{itemize}
    \item существует $U\in\mathbb{R}$ и $U>u(e)$;
    \item существует последовательность действий $a_1,\ldots,a_n\in A^*$,
    которая переводит (не переводит) агента $a$ из состояния $e$ в состояние
    $g$ с $u(g) \geq U$;
    \item существует другое состояние $e'_i\in E_i\colon e'=(e_1,\ldots,e'_i,\ldots,\allowbreak e_n,\allowbreak s)$, при котором агент $a$
    не сможет (сможет) перейти в состояние $g'$ c $u(g')\geq U$ при той же
    последовательности действий.
\end{itemize}

% ССЫЛКА ЗДЕСЬ Bai-2010
